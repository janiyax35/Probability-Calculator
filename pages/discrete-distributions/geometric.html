<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometric Distribution | Random Variables & Probability Distributions</title>
    
    <!-- Favicon -->
    <link rel="icon" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/svgs/solid/calculator.svg" type="image/svg+xml">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Montserrat and Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/components.css">
</head>
<body>
    <!-- Particles.js Background -->
    <div id="particles-js"></div>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="../../index.html">
                <i class="fas fa-square-root-variable me-2"></i>
                Probability Calculator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="basicDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Basics
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="basicDropdown">
                            <li><a class="dropdown-item" href="../../pages/basic-probability/sample-space.html">Sample Space</a></li>
                            <li><a class="dropdown-item" href="../../pages/basic-probability/conditional.html">Conditional Probability</a></li>
                            <li><a class="dropdown-item" href="../../pages/basic-probability/bayes-theorem.html">Bayes' Theorem</a></li>
                            <li><a class="dropdown-item" href="../../pages/basic-probability/independence.html">Independence</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="rvDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Random Variables
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="rvDropdown">
                            <li><a class="dropdown-item" href="../../pages/random-variables/overview.html">Overview</a></li>
                            <li><a class="dropdown-item" href="../../pages/random-variables/pmf-pdf.html">PMF/PDF</a></li>
                            <li><a class="dropdown-item" href="../../pages/random-variables/cdf.html">CDF</a></li>
                            <li><a class="dropdown-item" href="../../pages/random-variables/expected-value.html">Expected Value</a></li>
                            <li><a class="dropdown-item" href="../../pages/random-variables/variance.html">Variance</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="discreteDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Discrete Distributions
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="discreteDropdown">
                            <li><a class="dropdown-item" href="bernoulli.html">Bernoulli</a></li>
                            <li><a class="dropdown-item" href="binomial.html">Binomial</a></li>
                            <li><a class="dropdown-item active" href="geometric.html">Geometric</a></li>
                            <li><a class="dropdown-item" href="poisson.html">Poisson</a></li>
                            <li><a class="dropdown-item" href="negative-binomial.html">Negative Binomial</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="continuousDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Continuous Distributions
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="continuousDropdown">
                            <li><a class="dropdown-item" href="../../pages/continuous-distributions/uniform.html">Uniform</a></li>
                            <li><a class="dropdown-item" href="../../pages/continuous-distributions/normal.html">Normal</a></li>
                            <li><a class="dropdown-item" href="../../pages/continuous-distributions/exponential.html">Exponential</a></li>
                            <li><a class="dropdown-item" href="../../pages/continuous-distributions/gamma.html">Gamma</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../../pages/about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../../pages/contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-4" data-aos="fade-up">Geometric Distribution</h1>
                    <p class="lead mb-0" data-aos="fade-up" data-aos-delay="200">Calculate probabilities related to the number of trials until first success or the number of failures before the first success</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Calculator Section -->
    <section class="calculator-section py-5">
        <div class="container">
            <div class="row g-4">
                <!-- Calculator Form -->
                <div class="col-lg-6" data-aos="fade-right">
                    <div class="calculator-form" id="geometric-calculator">
                        <h2 class="mb-4">Geometric Distribution Calculator</h2>
                        
                        <!-- Parameters -->
                        <div class="mb-4">
                            <h4>Distribution Parameters</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="p" class="form-label">Success Probability (p):</label>
                                    <input type="number" class="form-control" id="p" min="0.01" max="1" step="0.01" value="0.3">
                                    <div class="form-text">Probability of success on a single trial (0 < p ≤ 1)</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="version" class="form-label">Distribution Version:</label>
                                    <select class="form-select" id="version">
                                        <option value="trials">Trials until first success (X ≥ 1)</option>
                                        <option value="failures">Failures before first success (X ≥ 0)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculation Type -->
                        <div class="mb-4">
                            <h4>Calculation Type</h4>
                            <select class="form-select" id="calculation-type">
                                <option value="pmf">Probability Mass Function (PMF): P(X = k)</option>
                                <option value="cdf">Cumulative Distribution Function (CDF): P(X ≤ k)</option>
                                <option value="interval">Interval Probability: P(a ≤ X ≤ b)</option>
                                <option value="mean">Expected Value (Mean): E[X]</option>
                                <option value="variance">Variance: Var(X)</option>
                            </select>
                        </div>
                        
                        <!-- Dynamic Input Fields -->
                        <div id="pmf-inputs" class="mb-4">
                            <label for="k-value" class="form-label">Number of Trials/Failures (k):</label>
                            <input type="number" class="form-control" id="k-value" min="1" step="1" value="3">
                            <div class="form-text" id="pmf-description">Calculate P(X = k), the probability of getting the first success on the kth trial</div>
                        </div>
                        
                        <div id="cdf-inputs" class="mb-4" style="display: none;">
                            <label for="k-value-cdf" class="form-label">Number of Trials/Failures (k):</label>
                            <input type="number" class="form-control" id="k-value-cdf" min="1" step="1" value="3">
                            <div class="form-text" id="cdf-description">Calculate P(X ≤ k), the probability of getting the first success within k trials</div>
                        </div>
                        
                        <div id="interval-inputs" class="mb-4" style="display: none;">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="a-value" class="form-label">Lower Bound (a):</label>
                                    <input type="number" class="form-control" id="a-value" min="1" step="1" value="2">
                                </div>
                                <div class="col-md-6">
                                    <label for="b-value" class="form-label">Upper Bound (b):</label>
                                    <input type="number" class="form-control" id="b-value" min="1" step="1" value="5">
                                </div>
                            </div>
                            <div class="form-text" id="interval-description">Calculate P(a ≤ X ≤ b), the probability of getting the first success between the ath and bth trials (inclusive)</div>
                        </div>
                        
                        <!-- Display Options -->
                        <div class="mb-4">
                            <h4>Display Options</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="decimal-places" class="form-label">Decimal Places:</label>
                                    <input type="number" class="form-control" id="decimal-places" min="1" max="10" step="1" value="4">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Calculation Buttons -->
                        <div class="d-flex gap-2 mt-4">
                            <button type="button" id="calculate-btn" class="btn btn-calculate">
                                <i class="fas fa-calculator me-2"></i>Calculate
                            </button>
                            <button type="button" id="reset-btn" class="btn btn-reset">
                                <i class="fas fa-undo me-2"></i>Reset
                            </button>
                        </div>
                    </div>
                    
                    <!-- Results Container -->
                    <div class="results-container mt-4" id="results" style="display: none;">
                        <h3>Result</h3>
                        <div class="result-value" id="result-value">0.147</div>
                        <div class="result-explanation" id="result-explanation">
                            The probability of getting the first success on the 3rd trial with p = 0.3 is 0.147 (14.7%).
                        </div>
                        
                        <!-- Result Formula -->
                        <div class="formula-display mt-3" id="result-formula">
                            \[ P(X = 3) = p(1-p)^{3-1} = 0.3 \cdot (1-0.3)^2 = 0.3 \cdot 0.49 = 0.147 \]
                        </div>
                        
                        <!-- Distribution Properties -->
                        <div class="mt-4">
                            <h4>Distribution Properties</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="property-card">
                                        <div class="property-name">Expected Value (Mean)</div>
                                        <div class="property-value" id="mean-value">3.333</div>
                                        <div class="property-formula">E[X] = 1/p = 1/0.3 = 3.333</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="property-card">
                                        <div class="property-name">Variance</div>
                                        <div class="property-value" id="variance-value">7.778</div>
                                        <div class="property-formula">Var(X) = (1-p)/p² = (1-0.3)/0.3² = 7.778</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="property-card">
                                        <div class="property-name">Standard Deviation</div>
                                        <div class="property-value" id="std-dev-value">2.789</div>
                                        <div class="property-formula">σ = √Var(X) = √7.778 = 2.789</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="property-card">
                                        <div class="property-name">Skewness</div>
                                        <div class="property-value" id="skewness-value">2.041</div>
                                        <div class="property-formula">(2-p)/√(1-p) = 2.041</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Step-by-Step Solution -->
                        <div class="mt-4">
                            <button class="btn btn-outline-primary" type="button" id="show-steps-btn">
                                <i class="fas fa-list-ol me-2"></i>Show Steps
                            </button>
                        </div>
                        
                        <div class="solution-steps mt-3" id="solution-steps" style="display: none;">
                            <h4>Step-by-Step Solution</h4>
                            <div id="steps-content">
                                <!-- Steps will be inserted here dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Visualization -->
                <div class="col-lg-6" data-aos="fade-left">
                    <div class="chart-container mb-4">
                        <h3>Geometric Distribution Visualization</h3>
                        <div class="chart-wrapper">
                            <canvas id="distribution-chart"></canvas>
                        </div>
                        <div class="d-flex justify-content-between mt-3">
                            <div class="distribution-params" id="chart-params">
                                <span>p = 0.3, Trials until first success</span>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-light" id="toggle-chart-type">
                                    <i class="fas fa-chart-bar me-1"></i>PMF/CDF
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Probability Table -->
                    <div class="probability-table-container mb-4">
                        <h3>Probability Table</h3>
                        <div class="table-responsive">
                            <table class="table table-striped table-dark" id="probability-table">
                                <thead>
                                    <tr>
                                        <th>k</th>
                                        <th>P(X = k)</th>
                                        <th>P(X ≤ k)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Table rows will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Distribution Info Card -->
                    <div class="theory-block" id="distribution-info">
                        <h3>Geometric Distribution Overview</h3>
                        <p>The <strong>geometric distribution</strong> models the number of trials needed to achieve the first success in a sequence of independent Bernoulli trials, each with the same probability of success.</p>
                        
                        <div class="formula-display mt-3">
                            <h4>Probability Mass Function (PMF)</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Trials until first success (X ≥ 1):</strong></p>
                                    \[ P(X = k) = p(1-p)^{k-1} \]
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Failures before first success (X ≥ 0):</strong></p>
                                    \[ P(X = k) = p(1-p)^k \]
                                </div>
                            </div>
                        </div>
                        
                        <div class="formula-display mt-3">
                            <h4>Cumulative Distribution Function (CDF)</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Trials until first success:</strong></p>
                                    \[ P(X \leq k) = 1 - (1-p)^k \]
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Failures before first success:</strong></p>
                                    \[ P(X \leq k) = 1 - (1-p)^{k+1} \]
                                </div>
                            </div>
                        </div>
                        
                        <div class="formula-display mt-3">
                            <h4>Expected Value</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Trials until first success:</strong></p>
                                    \[ E[X] = \frac{1}{p} \]
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Failures before first success:</strong></p>
                                    \[ E[X] = \frac{1-p}{p} \]
                                </div>
                            </div>
                        </div>
                        
                        <div class="formula-display mt-3">
                            <h4>Variance</h4>
                            <p>For both versions:</p>
                            \[ Var(X) = \frac{1-p}{p^2} \]
                        </div>
                        
                        <h4 class="mt-4">Key Properties</h4>
                        <ul>
                            <li>The geometric distribution is <strong>memoryless</strong>: P(X > m+n | X > m) = P(X > n)</li>
                            <li>It is the only discrete distribution with this property</li>
                            <li>The distribution is always positively skewed (right-tailed)</li>
                            <li>As p approaches 0, both the mean and variance increase rapidly</li>
                            <li>The mode is always at k = 1 (for trials version) or k = 0 (for failures version)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Theory Section -->
    <section class="theory-section py-5 bg-dark">
        <div class="container">
            <h2 class="text-center mb-5" data-aos="fade-up">Understanding the Geometric Distribution</h2>
            
            <div class="row g-4">
                <div class="col-lg-6" data-aos="fade-right">
                    <div class="theory-block">
                        <h3>Definition & Characteristics</h3>
                        <p>The geometric distribution models the number of trials required to achieve the first success in a sequence of independent Bernoulli trials, where each trial has the same probability of success p.</p>
                        
                        <p>There are two common formulations of the geometric distribution:</p>
                        
                        <ol>
                            <li><strong>Trials Until First Success (X ≥ 1):</strong> The random variable X represents the number of trials needed to get the first success.</li>
                            <li><strong>Failures Before First Success (X ≥ 0):</strong> The random variable X represents the number of failures before the first success is observed.</li>
                        </ol>
                        
                        <p>The difference between these formulations is simply a shift of 1 in the random variable.</p>
                        
                        <h4 class="mt-4">Requirements for a Geometric Distribution</h4>
                        <ol>
                            <li><strong>Binary outcomes:</strong> Each trial has exactly two possible outcomes: "success" or "failure".</li>
                            <li><strong>Independence:</strong> The outcome of each trial is independent of all other trials.</li>
                            <li><strong>Constant probability:</strong> The probability of success p is the same for each trial.</li>
                            <li><strong>Counting until first success:</strong> We're interested in the trial number when the first success occurs.</li>
                        </ol>
                        
                        <h4 class="mt-4">Mathematical Formulation</h4>
                        <p>A random variable X follows a geometric distribution with parameter p, written as X ~ Geo(p), if:</p>
                        <ul>
                            <li>X represents the number of trials until the first success (or failures before first success, depending on the version)</li>
                            <li>The probability of success in any single trial is p</li>
                            <li>All trials are independent of each other</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-6" data-aos="fade-left">
                    <div class="theory-block">
                        <h3>Properties & Applications</h3>
                        
                        <h4>Memoryless Property</h4>
                        <p>The geometric distribution is memoryless, which means that the probability of success in future trials is not affected by what has happened in past trials. Mathematically:</p>
                        <div class="formula-display">
                            \[ P(X > m+n | X > m) = P(X > n) \]
                        </div>
                        <p>This property is unique among discrete distributions and has important applications in reliability theory and stochastic processes.</p>
                        
                        <h4>Key Properties</h4>
                        <div class="property-list">
                            <div class="property">
                                <div class="property-name">Expected Value (Mean)</div>
                                <div class="property-formula">E[X] = 1/p or (1-p)/p</div>
                                <div class="property-explanation">The average number of trials needed to get the first success</div>
                            </div>
                            <div class="property">
                                <div class="property-name">Variance</div>
                                <div class="property-formula">Var(X) = (1-p)/p²</div>
                                <div class="property-explanation">Measures the spread or dispersion of the distribution</div>
                            </div>
                            <div class="property">
                                <div class="property-name">Standard Deviation</div>
                                <div class="property-formula">σ = √((1-p)/p²)</div>
                                <div class="property-explanation">Typical deviation from the mean</div>
                            </div>
                            <div class="property">
                                <div class="property-name">Skewness</div>
                                <div class="property-formula">(2-p)/√(1-p)</div>
                                <div class="property-explanation">Always positive, indicating right-skewed distribution</div>
                            </div>
                            <div class="property">
                                <div class="property-name">Mode</div>
                                <div class="property-formula">1 (trials version) or 0 (failures version)</div>
                                <div class="property-explanation">The most likely outcome</div>
                            </div>
                        </div>
                        
                        <h4 class="mt-4">Real-World Applications</h4>
                        <ul>
                            <li><strong>Quality Control:</strong> Modeling the number of items inspected until finding the first defective item</li>
                            <li><strong>Reliability Theory:</strong> Time until failure for components with constant failure rates</li>
                            <li><strong>Gambling:</strong> Number of bets until the first win</li>
                            <li><strong>Medicine:</strong> Number of patients screened until finding one with a rare disease</li>
                            <li><strong>Marketing:</strong> Number of sales calls until the first successful sale</li>
                            <li><strong>Epidemiology:</strong> Number of individuals tested until finding the first infected person</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Example Problems Section -->
            <div class="row mt-5">
                <div class="col-12" data-aos="fade-up">
                    <div class="theory-block">
                        <h3 class="text-center mb-4">Example Problems</h3>
                        
                        <div class="example-card">
                            <h4>Example 1: Quality Control</h4>
                            <p>A manufacturing process produces items with a 5% defect rate. Quality control inspectors examine items one at a time until they find a defective item. What is the probability that they need to examine exactly 10 items to find the first defective item?</p>
                            
                            <div class="solution-toggle">
                                <button class="btn btn-sm btn-outline-light mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#solution1">
                                    <i class="fas fa-lightbulb me-1"></i>Show Solution
                                </button>
                                <div class="collapse" id="solution1">
                                    <div class="solution-content">
                                        <p>This is a geometric distribution where:</p>
                                        <ul>
                                            <li>p = 0.05 (probability of finding a defective item)</li>
                                            <li>We want P(X = 10), the probability of finding the first defective item on the 10th inspection</li>
                                        </ul>
                                        <div class="formula-display">
                                            \begin{align}
                                            P(X = 10) &= p(1-p)^{10-1} \\
                                            &= 0.05 \times (1-0.05)^9 \\
                                            &= 0.05 \times 0.95^9 \\
                                            &= 0.05 \times 0.6302 \\
                                            &= 0.0315
                                            \end{align}
                                        </div>
                                        <p>The probability of finding the first defective item on exactly the 10th inspection is 0.0315 or about 3.15%.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <h4>Example 2: Sales Calls</h4>
                            <p>A salesperson has a 20% success rate on sales calls. What is the probability that they will need to make at most 3 calls to make their first sale?</p>
                            
                            <div class="solution-toggle">
                                <button class="btn btn-sm btn-outline-light mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#solution2">
                                    <i class="fas fa-lightbulb me-1"></i>Show Solution
                                </button>
                                <div class="collapse" id="solution2">
                                    <div class="solution-content">
                                        <p>This is a geometric distribution where:</p>
                                        <ul>
                                            <li>p = 0.2 (probability of success on a single call)</li>
                                            <li>We want P(X ≤ 3), the probability of making the first sale within the first 3 calls</li>
                                        </ul>
                                        <div class="formula-display">
                                            \begin{align}
                                            P(X \leq 3) &= 1 - (1-p)^3 \\
                                            &= 1 - (1-0.2)^3 \\
                                            &= 1 - 0.8^3 \\
                                            &= 1 - 0.512 \\
                                            &= 0.488
                                            \end{align}
                                        </div>
                                        <p>The probability that the salesperson will make their first sale within 3 calls is 0.488 or about 48.8%.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <h4>Example 3: Expected Number of Attempts</h4>
                            <p>A basketball player makes free throws with 75% accuracy. On average, how many free throws must the player attempt before making one?</p>
                            
                            <div class="solution-toggle">
                                <button class="btn btn-sm btn-outline-light mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#solution3">
                                    <i class="fas fa-lightbulb me-1"></i>Show Solution
                                </button>
                                <div class="collapse" id="solution3">
                                    <div class="solution-content">
                                        <p>This is a geometric distribution where:</p>
                                        <ul>
                                            <li>p = 0.75 (probability of making a free throw)</li>
                                            <li>We want E[X], the expected number of attempts until the first success</li>
                                        </ul>
                                        <div class="formula-display">
                                            \begin{align}
                                            E[X] &= \frac{1}{p} \\
                                            &= \frac{1}{0.75} \\
                                            &= 1.333...
                                            \end{align}
                                        </div>
                                        <p>On average, the player will need to attempt about 1.33 free throws before making one. In other words, they will usually make a free throw on the first or second attempt.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <h4>Example 4: Memoryless Property</h4>
                            <p>A person rolls a fair six-sided die repeatedly until they roll a 6. If they've already rolled 10 times without getting a 6, what is the probability that they will need at least 5 more rolls to get a 6?</p>
                            
                            <div class="solution-toggle">
                                <button class="btn btn-sm btn-outline-light mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#solution4">
                                    <i class="fas fa-lightbulb me-1"></i>Show Solution
                                </button>
                                <div class="collapse" id="solution4">
                                    <div class="solution-content">
                                        <p>This problem demonstrates the memoryless property of the geometric distribution.</p>
                                        <ul>
                                            <li>p = 1/6 (probability of rolling a 6)</li>
                                            <li>We want P(X > 10+4 | X > 10) = P(X > 4), the probability of needing at least 5 more rolls</li>
                                        </ul>
                                        <div class="formula-display">
                                            \begin{align}
                                            P(X > 4) &= (1-p)^4 \\
                                            &= (1-1/6)^4 \\
                                            &= (5/6)^4 \\
                                            &= 0.482
                                            \end{align}
                                        </div>
                                        <p>Due to the memoryless property, the probability is the same as if they were just starting to roll. The probability that they will need at least 5 more rolls is about 0.482 or 48.2%.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz Section -->
    <section class="quiz-section py-5">
        <div class="container">
            <h2 class="text-center mb-5" data-aos="fade-up">Test Your Knowledge</h2>
            
            <div class="row justify-content-center">
                <div class="col-lg-8" data-aos="fade-up">
                    <div class="quiz-card">
                        <h4>Quick Quiz: Geometric Distribution</h4>
                        
                        <div class="quiz-question">
                            <p>1. A fair coin is flipped until a head appears. What is the probability that exactly 4 flips will be needed?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-value="a">
                                    <span class="option-label">A.</span> 1/16
                                </div>
                                <div class="quiz-option" data-value="b">
                                    <span class="option-label">B.</span> 1/8
                                </div>
                                <div class="quiz-option" data-value="c">
                                    <span class="option-label">C.</span> 3/16
                                </div>
                                <div class="quiz-option" data-value="d">
                                    <span class="option-label">D.</span> 1/4
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="feedback-1"></div>
                        
                        <div class="quiz-question mt-4">
                            <p>2. If the probability of success on a single trial is 0.4, what is the expected number of trials until the first success?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-value="a">
                                    <span class="option-label">A.</span> 2.5
                                </div>
                                <div class="quiz-option" data-value="b">
                                    <span class="option-label">B.</span> 0.4
                                </div>
                                <div class="quiz-option" data-value="c">
                                    <span class="option-label">C.</span> 1.5
                                </div>
                                <div class="quiz-option" data-value="d">
                                    <span class="option-label">D.</span> 4
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="feedback-2"></div>
                        
                        <div class="quiz-question mt-4">
                            <p>3. Which of the following statements about the geometric distribution is FALSE?</p>
                            <div class="quiz-options">
                                <div class="quiz-option" data-value="a">
                                    <span class="option-label">A.</span> It models the number of trials until the first success
                                </div>
                                <div class="quiz-option" data-value="b">
                                    <span class="option-label">B.</span> It has the memoryless property
                                </div>
                                <div class="quiz-option" data-value="c">
                                    <span class="option-label">C.</span> The variance is always less than the mean
                                </div>
                                <div class="quiz-option" data-value="d">
                                    <span class="option-label">D.</span> The distribution is always right-skewed
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="feedback-3"></div>
                        
                        <div class="d-grid gap-2 mt-4">
                            <button class="btn btn-primary" type="button" id="check-answers-btn">
                                <i class="fas fa-check-circle me-2"></i>Check Answers
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer py-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5>Random Variables & Probability</h5>
                    <p>A comprehensive calculator for probability theory concepts and distributions.</p>
                </div>
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../../pages/basic-probability/sample-space.html">Basic Probability</a></li>
                        <li><a href="../../pages/discrete-distributions/binomial.html">Discrete Distributions</a></li>
                        <li><a href="../../pages/continuous-distributions/normal.html">Continuous Distributions</a></li>
                        <li><a href="../../pages/about.html">About</a></li>
                        <li><a href="../../pages/contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5>Connect with me</h5>
                    <div class="social-links">
                        <a href="mailto:janithmihijaya123@gmail.com"><i class="fas fa-envelope"></i></a>
                        <a href="https://www.facebook.com/janith.deshan.186"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.linkedin.com/in/janithdeshan/"><i class="fab fa-linkedin"></i></a>
                        <a href="https://github.com/janiyax35"><i class="fab fa-github"></i></a>
                        <a href="https://www.instagram.com/janith_deshan11/"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 Janith Deshan. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Built with <i class="fas fa-heart text-danger"></i> for probability enthusiasts</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Libraries -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Bootstrap 5 JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS Animation Library JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Particles.js for background animation -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- MathJax for Mathematical Notation -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Custom JS -->
    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="../../js/utils.js"></script>
    
    <!-- Geometric Distribution Calculator JS -->
    <script type="module">
        import { calculateGeometric } from '../../js/calculators/discrete.js';

        document.addEventListener('DOMContentLoaded', function() {
            // UI Elements
            const calculationType = document.getElementById('calculation-type');
            const versionSelect = document.getElementById('version');
            const pmfInputs = document.getElementById('pmf-inputs');
            const cdfInputs = document.getElementById('cdf-inputs');
            const intervalInputs = document.getElementById('interval-inputs');
            const pmfDescription = document.getElementById('pmf-description');
            const cdfDescription = document.getElementById('cdf-description');
            const intervalDescription = document.getElementById('interval-description');
            const calculateBtn = document.getElementById('calculate-btn');
            const resetBtn = document.getElementById('reset-btn');
            const showStepsBtn = document.getElementById('show-steps-btn');
            const resultsContainer = document.getElementById('results');
            const solutionSteps = document.getElementById('solution-steps');
            const toggleChartTypeBtn = document.getElementById('toggle-chart-type');
            
            // State variables
            let chartInstance = null;
            let currentChartType = 'pmf'; // 'pmf' or 'cdf'
            
            // Initialize
            updateInputFields();
            updateDescriptions();
            createInitialChart();
            
            // Event Listeners
            calculationType.addEventListener('change', updateInputFields);
            versionSelect.addEventListener('change', function() {
                updateDescriptions();
                updateMinValues();
                createInitialChart();
            });
            calculateBtn.addEventListener('click', performCalculation);
            resetBtn.addEventListener('click', resetCalculator);
            showStepsBtn.addEventListener('click', toggleSolutionSteps);
            toggleChartTypeBtn.addEventListener('click', toggleChartType);
            
            // Handle quiz
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionDiv = this.closest('.quiz-question');
                    questionDiv.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                });
            });
            
            document.getElementById('check-answers-btn').addEventListener('click', checkQuizAnswers);
            
            // Functions
            function updateInputFields() {
                const type = calculationType.value;
                
                // Hide all input sections
                pmfInputs.style.display = 'none';
                cdfInputs.style.display = 'none';
                intervalInputs.style.display = 'none';
                
                // Show relevant input section
                switch (type) {
                    case 'pmf':
                        pmfInputs.style.display = 'block';
                        break;
                    case 'cdf':
                        cdfInputs.style.display = 'block';
                        break;
                    case 'interval':
                        intervalInputs.style.display = 'block';
                        break;
                }
            }
            
            function updateDescriptions() {
                const version = versionSelect.value;
                
                if (version === 'trials') {
                    pmfDescription.textContent = "Calculate P(X = k), the probability of getting the first success on the kth trial";
                    cdfDescription.textContent = "Calculate P(X ≤ k), the probability of getting the first success within k trials";
                    intervalDescription.textContent = "Calculate P(a ≤ X ≤ b), the probability of getting the first success between the ath and bth trials (inclusive)";
                } else {
                    pmfDescription.textContent = "Calculate P(X = k), the probability of having exactly k failures before the first success";
                    cdfDescription.textContent = "Calculate P(X ≤ k), the probability of having at most k failures before the first success";
                    intervalDescription.textContent = "Calculate P(a ≤ X ≤ b), the probability of having between a and b failures (inclusive) before the first success";
                }
            }
            
            function updateMinValues() {
                const version = versionSelect.value;
                const minValue = version === 'trials' ? 1 : 0;
                
                document.getElementById('k-value').min = minValue;
                document.getElementById('k-value-cdf').min = minValue;
                document.getElementById('a-value').min = minValue;
                document.getElementById('b-value').min = minValue;
                
                // If current values are less than the new minimum, update them
                if (parseInt(document.getElementById('k-value').value) < minValue) {
                    document.getElementById('k-value').value = minValue;
                }
                if (parseInt(document.getElementById('k-value-cdf').value) < minValue) {
                    document.getElementById('k-value-cdf').value = minValue;
                }
                if (parseInt(document.getElementById('a-value').value) < minValue) {
                    document.getElementById('a-value').value = minValue;
                }
                if (parseInt(document.getElementById('b-value').value) < minValue) {
                    document.getElementById('b-value').value = minValue;
                }
            }
            
            function createInitialChart() {
                const p = parseFloat(document.getElementById('p').value);
                const version = versionSelect.value;
                const firstSuccessVersion = version === 'trials';
                
                updateChart(p, firstSuccessVersion);
                updateProbabilityTable(p, firstSuccessVersion);
                updateChartParams(p, firstSuccessVersion);
            }
            
            function performCalculation() {
                // Get parameters
                const p = parseFloat(document.getElementById('p').value);
                const version = versionSelect.value;
                const firstSuccessVersion = version === 'trials';
                const decimals = parseInt(document.getElementById('decimal-places').value);
                const calculationType = document.getElementById('calculation-type').value;
                
                // Validate parameters
                if (isNaN(p) || p <= 0 || p > 1) {
                    alert('Success probability (p) must be between 0 and 1 (exclusive of 0).');
                    return;
                }
                
                // Get specific parameters based on calculation type
                let params = { p, calculationType, decimals, firstSuccessVersion };
                
                switch (calculationType) {
                    case 'pmf':
                        const k = parseInt(document.getElementById('k-value').value);
                        const minK = firstSuccessVersion ? 1 : 0;
                        
                        if (isNaN(k) || k < minK || !Number.isInteger(k)) {
                            alert(`Number of ${firstSuccessVersion ? 'trials' : 'failures'} (k) must be a ${minK === 0 ? 'non-negative' : 'positive'} integer.`);
                            return;
                        }
                        params.k = k;
                        break;
                        
                    case 'cdf':
                        const kCdf = parseInt(document.getElementById('k-value-cdf').value);
                        const minKCdf = firstSuccessVersion ? 1 : 0;
                        
                        if (isNaN(kCdf) || kCdf < minKCdf || !Number.isInteger(kCdf)) {
                            alert(`Number of ${firstSuccessVersion ? 'trials' : 'failures'} (k) must be a ${minKCdf === 0 ? 'non-negative' : 'positive'} integer.`);
                            return;
                        }
                        params.k = kCdf;
                        break;
                        
                    case 'interval':
                        const a = parseInt(document.getElementById('a-value').value);
                        const b = parseInt(document.getElementById('b-value').value);
                        const minAB = firstSuccessVersion ? 1 : 0;
                        
                        if (isNaN(a) || isNaN(b) || a < minAB || b < minAB || !Number.isInteger(a) || !Number.isInteger(b)) {
                            alert(`Interval bounds must be ${minAB === 0 ? 'non-negative' : 'positive'} integers.`);
                            return;
                        }
                        
                        if (a > b) {
                            alert('Lower bound (a) must be less than or equal to upper bound (b).');
                            return;
                        }
                        
                        params.a = a;
                        params.b = b;
                        break;
                }
                
                // Calculate
                const result = calculateGeometric(params);
                
                // Check for errors
                if (result.error) {
                    alert(result.error);
                    return;
                }
                
                // Display results
                displayResults(result, params);
                
                // Update chart
                updateChart(p, firstSuccessVersion, params);
                updateProbabilityTable(p, firstSuccessVersion);
                updateChartParams(p, firstSuccessVersion);
                
                // Show results container
                resultsContainer.style.display = 'block';
            }
            
            function displayResults(result, params) {
                // Display result value
                document.getElementById('result-value').textContent = result.result;
                
                // Display explanation
                document.getElementById('result-explanation').textContent = result.interpretation;
                
                // Display formula
                document.getElementById('result-formula').innerHTML = `\\[${result.formula}\\]`;
                
                // Display distribution properties
                document.getElementById('mean-value').textContent = result.mean;
                document.getElementById('variance-value').textContent = result.variance;
                document.getElementById('std-dev-value').textContent = result.stdDev;
                document.getElementById('skewness-value').textContent = result.skewness;
                
                // Display steps
                document.getElementById('steps-content').innerHTML = result.steps.map(step => 
                    `<div class="step-item">${step}</div>`
                ).join('');
                
                // Update MathJax rendering
                if (window.MathJax) {
                    MathJax.typesetPromise();
                }
            }
            
            function updateChart(p, firstSuccessVersion, params) {
                // Determine support range based on distribution version
                const offset = firstSuccessVersion ? 1 : 0;
                
                // Calculate maxK (show enough values to cover most of the distribution)
                const mean = firstSuccessVersion ? 1/p : (1-p)/p;
                const maxK = Math.min(30, Math.ceil(mean + 5 * Math.sqrt(mean)));
                
                // Generate data for PMF
                const pmfData = [];
                const cdfData = [];
                const labels = [];
                
                let cumulativeProbability = 0;
                
                for (let k = offset; k <= maxK; k++) {
                    const pmf = firstSuccessVersion ? 
                        p * Math.pow(1-p, k-1) : // trials until first success
                        p * Math.pow(1-p, k);    // failures before first success
                    
                    cumulativeProbability += pmf;
                    
                    pmfData.push(pmf);
                    cdfData.push(cumulativeProbability);
                    labels.push(k.toString());
                    
                    // Stop when we've covered 99.9% of the distribution
                    if (cumulativeProbability > 0.999) break;
                }
                
                // Highlight specific values if available in params
                let highlightIndex = -1;
                let highlightRange = [];
                
                if (params) {
                    switch (params.calculationType) {
                        case 'pmf':
                            highlightIndex = params.k - offset;
                            break;
                        case 'cdf':
                            highlightRange = Array.from({length: params.k + 1 - offset}, (_, i) => i);
                            break;
                        case 'interval':
                            highlightRange = Array.from({length: params.b - params.a + 1}, (_, i) => i + params.a - offset);
                            break;
                    }
                }
                
                // Create background colors array
                const pmfBackgroundColors = pmfData.map((_, index) => {
                    if (highlightIndex === index) {
                        return 'rgba(255, 99, 132, 0.7)'; // Highlight specific value
                    } else if (highlightRange.includes(index)) {
                        return 'rgba(255, 99, 132, 0.7)'; // Highlight range
                    } else {
                        return 'rgba(54, 162, 235, 0.7)'; // Default color
                    }
                });
                
                // Create border colors array
                const pmfBorderColors = pmfData.map((_, index) => {
                    if (highlightIndex === index || highlightRange.includes(index)) {
                        return 'rgba(255, 99, 132, 1)';
                    } else {
                        return 'rgba(54, 162, 235, 1)';
                    }
                });
                
                // Calculate expected value for chart annotation
                const chartMean = mean;
                
                // Destroy existing chart if any
                if (chartInstance) {
                    chartInstance.destroy();
                }
                
                // Create chart
                const ctx = document.getElementById('distribution-chart').getContext('2d');
                
                chartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: currentChartType === 'pmf' ? 
                                firstSuccessVersion ? 'PMF: P(X = k)' : 'PMF: P(X = k)' : 
                                firstSuccessVersion ? 'CDF: P(X ≤ k)' : 'CDF: P(X ≤ k)',
                            data: currentChartType === 'pmf' ? pmfData : cdfData,
                            backgroundColor: pmfBackgroundColors,
                            borderColor: pmfBorderColors,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: firstSuccessVersion ? 'Number of Trials (k)' : 'Number of Failures (k)',
                                    color: '#fff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#fff'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: currentChartType === 'pmf' ? 'Probability P(X = k)' : 'Probability P(X ≤ k)',
                                    color: '#fff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#fff'
                                },
                                beginAtZero: true,
                                max: currentChartType === 'pmf' ? Math.max(...pmfData) * 1.1 : 1.05
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#fff'
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    title: function(tooltipItems) {
                                        return `k = ${tooltipItems[0].label}`;
                                    },
                                    label: function(context) {
                                        if (currentChartType === 'pmf') {
                                            return `P(X = ${context.label}) = ${context.raw.toFixed(6)}`;
                                        } else {
                                            return `P(X ≤ ${context.label}) = ${context.raw.toFixed(6)}`;
                                        }
                                    }
                                }
                            },
                            annotation: {
                                annotations: {
                                    meanLine: {
                                        type: 'line',
                                        xMin: chartMean,
                                        xMax: chartMean,
                                        borderColor: 'rgba(255, 255, 255, 0.7)',
                                        borderWidth: 2,
                                        borderDash: [5, 5],
                                        label: {
                                            display: true,
                                            content: `Mean = ${chartMean.toFixed(2)}`,
                                            position: 'top',
                                            backgroundColor: 'rgba(0, 0, 0, 0.7)',
                                            color: '#fff'
                                        }
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            function updateProbabilityTable(p, firstSuccessVersion) {
                const tableBody = document.getElementById('probability-table').querySelector('tbody');
                tableBody.innerHTML = '';
                
                // Determine support range based on distribution version
                const offset = firstSuccessVersion ? 1 : 0;
                
                // Calculate maxK
                const mean = firstSuccessVersion ? 1/p : (1-p)/p;
                const maxK = Math.min(20, Math.ceil(mean + 4 * Math.sqrt(mean)));
                
                let cumulativeProbability = 0;
                
                for (let k = offset; k <= maxK; k++) {
                    const pmf = firstSuccessVersion ? 
                        p * Math.pow(1-p, k-1) : // trials until first success
                        p * Math.pow(1-p, k);    // failures before first success
                    
                    cumulativeProbability += pmf;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${k}</td>
                        <td>${pmf.toFixed(6)}</td>
                        <td>${cumulativeProbability.toFixed(6)}</td>
                    `;
                    
                    tableBody.appendChild(row);
                    
                    // Stop when we've covered 99.9% of the distribution
                    if (cumulativeProbability > 0.999) break;
                }
            }
            
            function updateChartParams(p, firstSuccessVersion) {
                document.getElementById('chart-params').textContent = `p = ${p}, ${firstSuccessVersion ? 'Trials until first success' : 'Failures before first success'}`;
            }
            
            function toggleChartType() {
                currentChartType = currentChartType === 'pmf' ? 'cdf' : 'pmf';
                
                const p = parseFloat(document.getElementById('p').value);
                const version = versionSelect.value;
                const firstSuccessVersion = version === 'trials';
                
                updateChart(p, firstSuccessVersion);
                
                toggleChartTypeBtn.innerHTML = currentChartType === 'pmf' ? 
                    '<i class="fas fa-chart-line me-1"></i>PMF/CDF' : 
                    '<i class="fas fa-chart-bar me-1"></i>CDF/PMF';
            }
            
            function resetCalculator() {
                // Reset form
                document.getElementById('p').value = '0.3';
                document.getElementById('version').value = 'trials';
                document.getElementById('k-value').value = '3';
                document.getElementById('k-value-cdf').value = '3';
                document.getElementById('a-value').value = '2';
                document.getElementById('b-value').value = '5';
                document.getElementById('decimal-places').value = '4';
                document.getElementById('calculation-type').value = 'pmf';
                
                // Update UI
                updateInputFields();
                updateDescriptions();
                updateMinValues();
                
                // Hide results
                resultsContainer.style.display = 'none';
                solutionSteps.style.display = 'none';
                showStepsBtn.innerHTML = '<i class="fas fa-list-ol me-2"></i>Show Steps';
                
                // Reset chart
                createInitialChart();
            }
            
            function toggleSolutionSteps() {
                if (solutionSteps.style.display === 'none') {
                    solutionSteps.style.display = 'block';
                    showStepsBtn.innerHTML = '<i class="fas fa-list-ol me-2"></i>Hide Steps';
                } else {
                    solutionSteps.style.display = 'none';
                    showStepsBtn.innerHTML = '<i class="fas fa-list-ol me-2"></i>Show Steps';
                }
            }
            
            function checkQuizAnswers() {
                // Get selected answers
                const answer1 = document.querySelector('.quiz-question:nth-child(1) .quiz-option.selected')?.getAttribute('data-value');
                const answer2 = document.querySelector('.quiz-question:nth-child(3) .quiz-option.selected')?.getAttribute('data-value');
                const answer3 = document.querySelector('.quiz-question:nth-child(5) .quiz-option.selected')?.getAttribute('data-value');
                
                // Check answers and display feedback
                if (answer1) {
                    const feedback1 = document.getElementById('feedback-1');
                    if (answer1 === 'b') {
                        feedback1.innerHTML = '<div class="correct-answer"><i class="fas fa-check-circle"></i> Correct! P(X = 4) = 0.5 × (0.5)³ = 0.0625 = 1/16</div>';
                        feedback1.style.display = 'block';
                    } else {
                        feedback1.innerHTML = '<div class="wrong-answer"><i class="fas fa-times-circle"></i> Incorrect. For a fair coin, p = 0.5. The probability of getting the first head on the 4th flip is P(X = 4) = 0.5 × (0.5)³ = 0.0625 = 1/16</div>';
                        feedback1.style.display = 'block';
                    }
                } else {
                    document.getElementById('feedback-1').innerHTML = '<div class="warning-message"><i class="fas fa-exclamation-circle"></i> Please select an answer for question 1.</div>';
                    document.getElementById('feedback-1').style.display = 'block';
                }
                
                if (answer2) {
                    const feedback2 = document.getElementById('feedback-2');
                    if (answer2 === 'a') {
                        feedback2.innerHTML = '<div class="correct-answer"><i class="fas fa-check-circle"></i> Correct! E[X] = 1/p = 1/0.4 = 2.5</div>';
                        feedback2.style.display = 'block';
                    } else {
                        feedback2.innerHTML = '<div class="wrong-answer"><i class="fas fa-times-circle"></i> Incorrect. For a geometric distribution, E[X] = 1/p = 1/0.4 = 2.5</div>';
                        feedback2.style.display = 'block';
                    }
                } else {
                    document.getElementById('feedback-2').innerHTML = '<div class="warning-message"><i class="fas fa-exclamation-circle"></i> Please select an answer for question 2.</div>';
                    document.getElementById('feedback-2').style.display = 'block';
                }
                
                if (answer3) {
                    const feedback3 = document.getElementById('feedback-3');
                    if (answer3 === 'c') {
                        feedback3.innerHTML = '<div class="correct-answer"><i class="fas fa-check-circle"></i> Correct! For a geometric distribution, the variance is (1-p)/p², which is always greater than the mean (1/p) when p < 1.</div>';
                        feedback3.style.display = 'block';
                    } else {
                        feedback3.innerHTML = '<div class="wrong-answer"><i class="fas fa-times-circle"></i> Incorrect. The variance of a geometric distribution is (1-p)/p², which is always greater than the mean (1/p) when p < 1.</div>';
                        feedback3.style.display = 'block';
                    }
                } else {
                    document.getElementById('feedback-3').innerHTML = '<div class="warning-message"><i class="fas fa-exclamation-circle"></i> Please select an answer for question 3.</div>';
                    document.getElementById('feedback-3').style.display = 'block';
                }
            }
            
            // Helper function for geometric PMF calculation
            function geometricPMF(p, k, firstSuccessVersion) {
                if (!Number.isInteger(k)) return 0;
                
                // k is number of trials until first success (k ≥ 1)
                if (firstSuccessVersion) {
                    if (k < 1) return 0;
                    return p * Math.pow(1 - p, k - 1);
                } 
                // k is number of failures before first success (k ≥ 0)
                else {
                    if (k < 0) return 0;
                    return p * Math.pow(1 - p, k);
                }
            }
            
            // Initialize AOS animation library
            AOS.init({
                duration: 800,
                once: true
            });
            
            // Initialize particles.js background if available
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: 80, density: { enable: true, value_area: 800 } },
                        color: { value: '#ffffff' },
                        shape: { type: 'circle' },
                        opacity: { value: 0.1, random: true },
                        size: { value: 3, random: true },
                        line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.1, width: 1 },
                        move: { enable: true, speed: 2, direction: 'none', random: true, straight: false, out_mode: 'out' }
                    },
                    interactivity: {
                        detect_on: 'canvas',
                        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } },
                        modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
                    },
                    retina_detect: true
                });
            }
        });
    </script>
</body>
</html>