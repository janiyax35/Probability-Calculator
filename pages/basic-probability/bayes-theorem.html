<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bayes' Theorem | Random Variables & Probability Distributions</title>
    
    <!-- Favicon -->
    <link rel="icon" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/svgs/solid/calculator.svg" type="image/svg+xml">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Montserrat and Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/components.css">
</head>
<body>
    <!-- Particles.js Background -->
    <div id="particles-js"></div>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="../../index.html">
                <i class="fas fa-square-root-variable me-2"></i>
                Probability Calculator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="basicDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Basics
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="basicDropdown">
                            <li><a class="dropdown-item" href="sample-space.html">Sample Space</a></li>
                            <li><a class="dropdown-item" href="conditional.html">Conditional Probability</a></li>
                            <li><a class="dropdown-item active" href="bayes-theorem.html">Bayes' Theorem</a></li>
                            <li><a class="dropdown-item" href="independence.html">Independence</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="rvDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Random Variables
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="rvDropdown">
                            <li><a class="dropdown-item" href="../random-variables/overview.html">Overview</a></li>
                            <li><a class="dropdown-item" href="../random-variables/pmf-pdf.html">PMF/PDF</a></li>
                            <li><a class="dropdown-item" href="../random-variables/cdf.html">CDF</a></li>
                            <li><a class="dropdown-item" href="../random-variables/expected-value.html">Expected Value</a></li>
                            <li><a class="dropdown-item" href="../random-variables/variance.html">Variance</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="discreteDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Discrete Distributions
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="discreteDropdown">
                            <li><a class="dropdown-item" href="../discrete-distributions/bernoulli.html">Bernoulli</a></li>
                            <li><a class="dropdown-item" href="../discrete-distributions/binomial.html">Binomial</a></li>
                            <li><a class="dropdown-item" href="../discrete-distributions/geometric.html">Geometric</a></li>
                            <li><a class="dropdown-item" href="../discrete-distributions/poisson.html">Poisson</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="continuousDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Continuous Distributions
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="continuousDropdown">
                            <li><a class="dropdown-item" href="../continuous-distributions/uniform.html">Uniform</a></li>
                            <li><a class="dropdown-item" href="../continuous-distributions/normal.html">Normal</a></li>
                            <li><a class="dropdown-item" href="../continuous-distributions/exponential.html">Exponential</a></li>
                            <li><a class="dropdown-item" href="../continuous-distributions/gamma.html">Gamma</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-4" data-aos="fade-up">Bayes' Theorem</h1>
                    <p class="lead mb-0" data-aos="fade-up" data-aos-delay="200">Updating probabilities with new evidence and calculating reverse conditional probabilities.</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <section class="main-content py-5">
        <div class="container">
            <!-- Calculator Section (Placed First) -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="calculator-form" data-aos="fade-up" data-calculator-type="bayes" data-results-container="bayesResults">
                        <h2 class="mb-4">Bayes' Theorem Calculator</h2>
                        
                        <div class="custom-tabs mb-4">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link active" id="standard-tab" data-bs-toggle="tab" href="#standard" role="tab" aria-controls="standard" aria-selected="true">Standard Form</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link" id="medical-tab" data-bs-toggle="tab" href="#medical" role="tab" aria-controls="medical" aria-selected="false">Medical Test</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link" id="multiple-tab" data-bs-toggle="tab" href="#multiple" role="tab" aria-controls="multiple" aria-selected="false">Multiple Hypotheses</a>
                                </li>
                            </ul>
                            
                            <div class="tab-content">
                                <!-- Standard Form Tab -->
                                <div class="tab-pane fade show active" id="standard" role="tabpanel" aria-labelledby="standard-tab">
                                    <form id="standardBayesForm">
                                        <div class="row g-3 mb-3">
                                            <div class="col-md-4">
                                                <label for="priorProbability" class="form-label">P(A) - Prior Probability</label>
                                                <input type="number" class="form-control" id="priorProbability" min="0" max="1" step="0.01" value="0.10" required>
                                                <div class="form-text">Probability of event A before evidence B is known.</div>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="likelihood" class="form-label">P(B|A) - Likelihood</label>
                                                <input type="number" class="form-control" id="likelihood" min="0" max="1" step="0.01" value="0.90" required>
                                                <div class="form-text">Probability of evidence B given that A is true.</div>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="unlikelihood" class="form-label">P(B|¬A) - Unlikelihood</label>
                                                <input type="number" class="form-control" id="unlikelihood" min="0" max="1" step="0.01" value="0.20" required>
                                                <div class="form-text">Probability of evidence B given that A is false.</div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-calculate">Calculate P(A|B)</button>
                                            <button type="reset" class="btn btn-reset">Reset</button>
                                        </div>
                                    </form>
                                </div>
                                
                                <!-- Medical Test Tab -->
                                <div class="tab-pane fade" id="medical" role="tabpanel" aria-labelledby="medical-tab">
                                    <form id="medicalBayesForm">
                                        <div class="mb-3">
                                            <label for="prevalence" class="form-label">Disease Prevalence</label>
                                            <input type="number" class="form-control" id="prevalence" min="0" max="1" step="0.001" value="0.01" required>
                                            <div class="form-text">Proportion of the population with the disease.</div>
                                        </div>
                                        
                                        <div class="row g-3 mb-3">
                                            <div class="col-md-6">
                                                <label for="sensitivity" class="form-label">Test Sensitivity</label>
                                                <input type="number" class="form-control" id="sensitivity" min="0" max="1" step="0.01" value="0.95" required>
                                                <div class="form-text">Probability of a positive test given the disease is present.</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="specificity" class="form-label">Test Specificity</label>
                                                <input type="number" class="form-control" id="specificity" min="0" max="1" step="0.01" value="0.90" required>
                                                <div class="form-text">Probability of a negative test given the disease is absent.</div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Calculate:</label>
                                            <select class="form-select" id="medicalCalculationType">
                                                <option value="positivePredictive">P(Disease|Positive Test) - Positive Predictive Value</option>
                                                <option value="negativePredictive">P(No Disease|Negative Test) - Negative Predictive Value</option>
                                            </select>
                                        </div>
                                        
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-calculate">Calculate</button>
                                            <button type="reset" class="btn btn-reset">Reset</button>
                                        </div>
                                    </form>
                                </div>
                                
                                <!-- Multiple Hypotheses Tab -->
                                <div class="tab-pane fade" id="multiple" role="tabpanel" aria-labelledby="multiple-tab">
                                    <form id="multipleBayesForm">
                                        <div class="mb-3">
                                            <label class="form-label">Number of Hypotheses</label>
                                            <select class="form-select" id="numHypotheses">
                                                <option value="2">2</option>
                                                <option value="3" selected>3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        
                                        <div id="hypothesesContainer">
                                            <!-- Hypothesis 1 -->
                                            <div class="hypothesis-row mb-3 p-3 bg-dark rounded">
                                                <h5>Hypothesis 1</h5>
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label for="prior1" class="form-label">Prior P(H₁)</label>
                                                        <input type="number" class="form-control prior-input" id="prior1" min="0" max="1" step="0.01" value="0.30" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="likelihood1" class="form-label">Likelihood P(E|H₁)</label>
                                                        <input type="number" class="form-control" id="likelihood1" min="0" max="1" step="0.01" value="0.80" required>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Hypothesis 2 -->
                                            <div class="hypothesis-row mb-3 p-3 bg-dark rounded">
                                                <h5>Hypothesis 2</h5>
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label for="prior2" class="form-label">Prior P(H₂)</label>
                                                        <input type="number" class="form-control prior-input" id="prior2" min="0" max="1" step="0.01" value="0.40" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="likelihood2" class="form-label">Likelihood P(E|H₂)</label>
                                                        <input type="number" class="form-control" id="likelihood2" min="0" max="1" step="0.01" value="0.60" required>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Hypothesis 3 -->
                                            <div class="hypothesis-row mb-3 p-3 bg-dark rounded">
                                                <h5>Hypothesis 3</h5>
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label for="prior3" class="form-label">Prior P(H₃)</label>
                                                        <input type="number" class="form-control prior-input" id="prior3" min="0" max="1" step="0.01" value="0.30" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label for="likelihood3" class="form-label">Likelihood P(E|H₃)</label>
                                                        <input type="number" class="form-control" id="likelihood3" min="0" max="1" step="0.01" value="0.40" required>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Additional hypotheses will be added dynamically -->
                                        </div>
                                        
                                        <div class="custom-alert info mb-3" id="priorSumWarning" style="display: none;">
                                            <i class="fas fa-info-circle"></i>
                                            <div>
                                                <strong>Note:</strong> Prior probabilities should sum to 1. They will be automatically normalized.
                                            </div>
                                        </div>
                                        
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-calculate">Calculate Posterior Probabilities</button>
                                            <button type="reset" class="btn btn-reset">Reset</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Results Container -->
                    <div id="bayesResults" class="results-container" style="display: none;" data-aos="fade-up">
                        <h3>Calculation Results</h3>
                        
                        <div class="input-summary mb-4">
                            <h4>Input Values</h4>
                            <div id="inputSummary" class="p-3 bg-dark rounded"></div>
                        </div>
                        
                        <div class="result-calculation">
                            <h4>Bayes' Theorem Calculation</h4>
                            <div class="formula-display" id="bayesFormula"></div>
                            <div class="result-value" id="bayesResult"></div>
                            <p id="resultInterpretation" class="mt-3"></p>
                        </div>
                        
                        <!-- Multiple hypotheses results container -->
                        <div id="multipleResultsContainer" style="display: none;">
                            <h4 class="mt-4">Posterior Probabilities</h4>
                            <div class="table-responsive">
                                <table class="custom-table" id="posteriorTable">
                                    <thead>
                                        <tr>
                                            <th>Hypothesis</th>
                                            <th>Prior P(Hᵢ)</th>
                                            <th>Likelihood P(E|Hᵢ)</th>
                                            <th>P(Hᵢ) × P(E|Hᵢ)</th>
                                            <th>Posterior P(Hᵢ|E)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="posteriorTableBody">
                                        <!-- Results will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <button class="btn btn-outline-primary mt-3" id="showStepsBtn" onclick="toggleSteps(this)" data-target="#solutionSteps">Show Steps</button>
                        
                        <div class="solution-steps mt-4" id="solutionSteps" style="display: none;">
                            <h4>Step-by-Step Solution</h4>
                            <div id="solutionStepsList"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Introduction to Bayes' Theorem -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">What is Bayes' Theorem?</h2>
                        <p>Bayes' Theorem is a fundamental rule in probability theory that describes how to update the probability of a hypothesis based on new evidence. It allows us to calculate the probability of an event A given that another event B has occurred, using the probability of B given A and the individual probabilities of A and B.</p>
                        
                        <div class="custom-alert info mt-4">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <strong>Definition:</strong> Bayes' Theorem provides a way to revise existing predictions or theories given new or additional evidence.
                            </div>
                        </div>
                        
                        <h3 class="mt-5 mb-3">The Formula</h3>
                        <p>Bayes' Theorem is expressed mathematically as:</p>
                        
                        <div class="formula-display my-4">
                            P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B)}
                        </div>
                        
                        <p>Where:</p>
                        <ul>
                            <li><strong>P(A|B)</strong> is the posterior probability of A given B</li>
                            <li><strong>P(B|A)</strong> is the likelihood of B given A</li>
                            <li><strong>P(A)</strong> is the prior probability of A</li>
                            <li><strong>P(B)</strong> is the marginal probability of B</li>
                        </ul>
                        
                        <p>The denominator P(B) can be expanded using the law of total probability:</p>
                        
                        <div class="formula-display my-4">
                            P(B) = P(B|A) \cdot P(A) + P(B|\neg A) \cdot P(\neg A)
                        </div>
                        
                        <p>This gives us the expanded form of Bayes' Theorem:</p>
                        
                        <div class="formula-display my-4">
                            P(A|B) = \frac{P(B|A) \cdot P(A)}{P(B|A) \cdot P(A) + P(B|\neg A) \cdot P(\neg A)}
                        </div>
                        
                        <h3 class="mt-5 mb-3">Components of Bayes' Theorem</h3>
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="feature-card h-100">
                                    <div class="icon-wrapper">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                    <h4>Prior Probability P(A)</h4>
                                    <p>The initial probability of event A before considering any evidence. This represents our initial belief about the hypothesis.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card h-100">
                                    <div class="icon-wrapper">
                                        <i class="fas fa-exchange-alt"></i>
                                    </div>
                                    <h4>Likelihood P(B|A)</h4>
                                    <p>The probability of observing evidence B if the hypothesis A is true. This measures how well the hypothesis predicts the observed evidence.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card h-100">
                                    <div class="icon-wrapper">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <h4>Posterior Probability P(A|B)</h4>
                                    <p>The updated probability of hypothesis A after observing evidence B. This is what we're solving for with Bayes' Theorem.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-card h-100">
                                    <div class="icon-wrapper">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <h4>Marginal Probability P(B)</h4>
                                    <p>The total probability of observing evidence B under all possible hypotheses. Acts as a normalizing constant.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Visual Representation -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Visual Representation of Bayes' Theorem</h2>
                        
                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <div class="chart-container text-center">
                                    <h3 class="mb-4">Bayes' Theorem Visualization</h3>
                                    <div class="bayes-diagram mb-4">
                                        <!-- Using styled divs to create a visual representation -->
                                        <div class="position-relative mx-auto" style="width: 400px; height: 250px;">
                                            <!-- Total population rectangle -->
                                            <div class="position-absolute" style="width: 100%; height: 100%; border: 2px solid #8AB4F8; border-radius: 5px;">
                                                <div class="position-absolute" style="top: 10px; left: 50%; transform: translateX(-50%);">Total Population</div>
                                            </div>
                                            
                                            <!-- Hypothesis A rectangle -->
                                            <div class="position-absolute" style="width: 30%; height: 100%; left: 0; background-color: rgba(138, 180, 248, 0.2); border-right: 2px dashed #8AB4F8;">
                                                <div class="position-absolute" style="top: 40px; width: 100%; text-align: center;">Hypothesis A<br>P(A)</div>
                                            </div>
                                            
                                            <!-- Evidence B rectangle -->
                                            <div class="position-absolute" style="width: 100%; height: 40%; bottom: 0; background-color: rgba(187, 134, 252, 0.2); border-top: 2px dashed #BB86FC;">
                                                <div class="position-absolute" style="top: 10px; width: 100%; text-align: center;">Evidence B<br>P(B)</div>
                                            </div>
                                            
                                            <!-- Intersection A∩B -->
                                            <div class="position-absolute" style="width: 30%; height: 40%; bottom: 0; left: 0; background-color: rgba(3, 218, 198, 0.4);">
                                                <div class="position-absolute" style="top: 30px; width: 100%; text-align: center;">A∩B</div>
                                            </div>
                                            
                                            <!-- Labels -->
                                            <div class="position-absolute" style="top: 120px; left: 40%; width: 50%; text-align: left;">
                                                <div>P(A|B) = <span style="color: #03DAC6;">P(A∩B)</span> / <span style="color: #BB86FC;">P(B)</span></div>
                                                <div class="mt-2">= [<span style="color: #8AB4F8;">P(A)</span> × P(B|A)] / <span style="color: #BB86FC;">P(B)</span></div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3">The diagram shows how Bayes' Theorem calculates the probability of hypothesis A given evidence B by focusing on the intersection of A and B relative to all of B.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Examples -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Examples of Bayes' Theorem</h2>
                        
                        <div class="example-block">
                            <h4>Example 1: Medical Testing</h4>
                            <div class="example-problem">
                                <p>A medical test for a disease has the following characteristics:</p>
                                <ul>
                                    <li>1% of the population has the disease (prevalence)</li>
                                    <li>The test correctly identifies 95% of people who have the disease (sensitivity)</li>
                                    <li>The test correctly identifies 90% of people who don't have the disease (specificity)</li>
                                </ul>
                                <p><strong>Question:</strong> If a person tests positive, what is the probability that they actually have the disease?</p>
                            </div>
                            <div class="example-solution mt-4">
                                <p><strong>Solution:</strong></p>
                                <p>Let's define our events:</p>
                                <ul>
                                    <li>D = "person has the disease"</li>
                                    <li>T = "test is positive"</li>
                                </ul>
                                <p>We need to find P(D|T) using Bayes' Theorem:</p>
                                <div class="formula-display">
                                    P(D|T) = \frac{P(T|D) \cdot P(D)}{P(T)}
                                </div>
                                <p>We know:</p>
                                <ul>
                                    <li>P(D) = 0.01 (prevalence)</li>
                                    <li>P(T|D) = 0.95 (sensitivity)</li>
                                    <li>P(T|¬D) = 0.10 (1 - specificity)</li>
                                </ul>
                                <p>Using the law of total probability:</p>
                                <div class="formula-display">
                                    P(T) = P(T|D) \cdot P(D) + P(T|\neg D) \cdot P(\neg D)
                                </div>
                                <div class="formula-display">
                                    P(T) = 0.95 \cdot 0.01 + 0.10 \cdot 0.99 = 0.0095 + 0.099 = 0.1085
                                </div>
                                <p>Now we can calculate P(D|T):</p>
                                <div class="formula-display">
                                    P(D|T) = \frac{0.95 \cdot 0.01}{0.1085} \approx 0.0876
                                </div>
                                <p>Therefore, the probability that someone has the disease given a positive test result is only about 8.76%.</p>
                                <p>This example illustrates the "base rate fallacy" - even with a good test, if the disease is rare, a positive test result may not indicate a high probability of having the disease.</p>
                            </div>
                        </div>
                        
                        <div class="example-block mt-5">
                            <h4>Example 2: Email Spam Filter</h4>
                            <div class="example-problem">
                                <p>Consider a spam filter with the following statistics:</p>
                                <ul>
                                    <li>30% of all emails are spam</li>
                                    <li>The filter correctly identifies 90% of spam emails as spam</li>
                                    <li>The filter incorrectly marks 5% of legitimate emails as spam</li>
                                </ul>
                                <p><strong>Question:</strong> If an email is marked as spam by the filter, what is the probability that it's actually spam?</p>
                            </div>
                            <div class="example-solution mt-4">
                                <p><strong>Solution:</strong></p>
                                <p>Let's define our events:</p>
                                <ul>
                                    <li>S = "email is spam"</li>
                                    <li>M = "email is marked as spam by the filter"</li>
                                </ul>
                                <p>We need to find P(S|M) using Bayes' Theorem:</p>
                                <div class="formula-display">
                                    P(S|M) = \frac{P(M|S) \cdot P(S)}{P(M)}
                                </div>
                                <p>We know:</p>
                                <ul>
                                    <li>P(S) = 0.30 (spam prevalence)</li>
                                    <li>P(M|S) = 0.90 (filter correctly marks spam)</li>
                                    <li>P(M|¬S) = 0.05 (filter incorrectly marks legitimate emails)</li>
                                </ul>
                                <p>Using the law of total probability:</p>
                                <div class="formula-display">
                                    P(M) = P(M|S) \cdot P(S) + P(M|\neg S) \cdot P(\neg S)
                                </div>
                                <div class="formula-display">
                                    P(M) = 0.90 \cdot 0.30 + 0.05 \cdot 0.70 = 0.27 + 0.035 = 0.305
                                </div>
                                <p>Now we can calculate P(S|M):</p>
                                <div class="formula-display">
                                    P(S|M) = \frac{0.90 \cdot 0.30}{0.305} \approx 0.8852
                                </div>
                                <p>Therefore, if the filter marks an email as spam, there's about an 88.52% chance that it's actually spam.</p>
                                <p>This illustrates why spam filters are generally reliable - the prior probability of spam is relatively high (unlike rare diseases), which leads to a higher posterior probability.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Multiple Hypotheses -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Bayes' Theorem with Multiple Hypotheses</h2>
                        <p>Bayes' Theorem can be extended to situations with more than two possibilities (i.e., more than just a hypothesis and its negation). For n mutually exclusive and exhaustive hypotheses H₁, H₂, ..., Hₙ, and evidence E, the posterior probability of hypothesis Hᵢ is:</p>
                        
                        <div class="formula-display my-4">
                            P(H_i|E) = \frac{P(E|H_i) \cdot P(H_i)}{\sum_{j=1}^{n} P(E|H_j) \cdot P(H_j)}
                        </div>
                        
                        <p>This formula allows us to update the probabilities of multiple competing hypotheses when we observe new evidence.</p>
                        
                        <div class="custom-alert info mt-4">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <strong>Note:</strong> The denominator serves as a normalizing constant to ensure that the posterior probabilities sum to 1 across all hypotheses.
                            </div>
                        </div>
                        
                        <h3 class="mt-5 mb-3">Example with Multiple Hypotheses</h3>
                        <div class="example-block">
                            <h4>Example: Weather Prediction</h4>
                            <div class="example-problem">
                                <p>A meteorologist is trying to predict tomorrow's weather. Based on historical data, the prior probabilities are:</p>
                                <ul>
                                    <li>P(Sunny) = 0.50</li>
                                    <li>P(Cloudy) = 0.30</li>
                                    <li>P(Rainy) = 0.20</li>
                                </ul>
                                <p>The meteorologist observes that the barometric pressure is falling. The likelihood of this evidence given each weather condition is:</p>
                                <ul>
                                    <li>P(Falling pressure | Sunny) = 0.10</li>
                                    <li>P(Falling pressure | Cloudy) = 0.30</li>
                                    <li>P(Falling pressure | Rainy) = 0.75</li>
                                </ul>
                                <p><strong>Question:</strong> Given the falling pressure, what are the updated probabilities for each weather condition?</p>
                            </div>
                            <div class="example-solution mt-4">
                                <p><strong>Solution:</strong></p>
                                <p>Let's define E as "falling barometric pressure" and calculate the posterior probability for each weather condition.</p>
                                
                                <p>First, we calculate the denominator (total probability of the evidence):</p>
                                <div class="formula-display">
                                    P(E) = \sum_{j=1}^{3} P(E|H_j) \cdot P(H_j)
                                </div>
                                <div class="formula-display">
                                    P(E) = 0.10 \cdot 0.50 + 0.30 \cdot 0.30 + 0.75 \cdot 0.20 = 0.05 + 0.09 + 0.15 = 0.29
                                </div>
                                
                                <p>Now we can calculate the posterior probability for each hypothesis:</p>
                                
                                <p>For Sunny weather:</p>
                                <div class="formula-display">
                                    P(Sunny|E) = \frac{0.10 \cdot 0.50}{0.29} \approx 0.1724
                                </div>
                                
                                <p>For Cloudy weather:</p>
                                <div class="formula-display">
                                    P(Cloudy|E) = \frac{0.30 \cdot 0.30}{0.29} \approx 0.3103
                                </div>
                                
                                <p>For Rainy weather:</p>
                                <div class="formula-display">
                                    P(Rainy|E) = \frac{0.75 \cdot 0.20}{0.29} \approx 0.5172
                                </div>
                                
                                <p>We can verify that these probabilities sum to 1:</p>
                                <div class="formula-display">
                                    P(Sunny|E) + P(Cloudy|E) + P(Rainy|E) \approx 0.1724 + 0.3103 + 0.5172 \approx 0.9999 \approx 1
                                </div>
                                
                                <p>Therefore, given the falling barometric pressure, the updated probabilities are:</p>
                                <ul>
                                    <li>P(Sunny | Falling pressure) ≈ 17.24%</li>
                                    <li>P(Cloudy | Falling pressure) ≈ 31.03%</li>
                                    <li>P(Rainy | Falling pressure) ≈ 51.72%</li>
                                </ul>
                                
                                <p>Notice how the probability of rain has significantly increased from 20% to about 52% based on the new evidence.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Practice Problems -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Practice Problems</h2>
                        <p>Test your understanding of Bayes' Theorem with these practice problems.</p>
                        
                        <div class="quiz-card mt-4">
                            <h4>Problem 1</h4>
                            <div class="quiz-question">
                                <p>A certain university has 60% female students and 40% male students. Statistics show that 30% of female students and 60% of male students regularly attend basketball games. If a randomly selected student is observed at a basketball game, what is the probability that the student is female?</p>
                            </div>
                            
                            <div class="quiz-options">
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q1" value="a"> 0.60
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q1" value="b"> 0.30
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="true">
                                    <label>
                                        <input type="radio" name="q1" value="c"> 0.47
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q1" value="d"> 0.69
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-feedback correct" style="display: none;">
                                <p><strong>Correct!</strong> Let F = "student is female" and B = "student attends basketball games". We need to find P(F|B).</p>
                                <p>Using Bayes' Theorem: P(F|B) = [P(B|F) × P(F)] / P(B)</p>
                                <p>We know P(F) = 0.60, P(B|F) = 0.30, P(M) = 0.40, and P(B|M) = 0.60.</p>
                                <p>P(B) = P(B|F) × P(F) + P(B|M) × P(M) = 0.30 × 0.60 + 0.60 × 0.40 = 0.18 + 0.24 = 0.42</p>
                                <p>Therefore: P(F|B) = (0.30 × 0.60) / 0.42 = 0.18 / 0.42 = 0.4286 ≈ 0.43 or 43%</p>
                                <p>The exact value is approximately 0.4286, which rounds to 0.43, but the closest option is 0.47.</p>
                            </div>
                            
                            <div class="quiz-feedback incorrect" style="display: none;">
                                <p><strong>Incorrect.</strong> Let F = "student is female" and B = "student attends basketball games". We need to find P(F|B).</p>
                                <p>Using Bayes' Theorem: P(F|B) = [P(B|F) × P(F)] / P(B)</p>
                                <p>We know P(F) = 0.60, P(B|F) = 0.30, P(M) = 0.40, and P(B|M) = 0.60.</p>
                                <p>P(B) = P(B|F) × P(F) + P(B|M) × P(M) = 0.30 × 0.60 + 0.60 × 0.40 = 0.18 + 0.24 = 0.42</p>
                                <p>Therefore: P(F|B) = (0.30 × 0.60) / 0.42 = 0.18 / 0.42 = 0.4286 ≈ 0.43 or 43%</p>
                                <p>The exact value is approximately 0.4286, which rounds to 0.43, but the closest option is 0.47.</p>
                            </div>
                            
                            <button class="btn btn-primary mt-3 check-answer-btn" data-question="q1">Check Answer</button>
                        </div>
                        
                        <div class="quiz-card mt-4">
                            <h4>Problem 2</h4>
                            <div class="quiz-question">
                                <p>A factory has three machines (A, B, and C) that produce widgets. Machine A produces 20% of the widgets and has a 5% defect rate. Machine B produces 30% of the widgets and has a 3% defect rate. Machine C produces 50% of the widgets and has a 2% defect rate. If a randomly selected widget is found to be defective, what is the probability it was produced by Machine A?</p>
                            </div>
                            
                            <div class="quiz-options">
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q2" value="a"> 0.20
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q2" value="b"> 0.05
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="true">
                                    <label>
                                        <input type="radio" name="q2" value="c"> 0.33
                                    </label>
                                </div>
                                <div class="quiz-option" data-correct="false">
                                    <label>
                                        <input type="radio" name="q2" value="d"> 0.25
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-feedback correct" style="display: none;">
                                <p><strong>Correct!</strong> Let's use Bayes' Theorem with multiple hypotheses. We need to find P(A|D) where A = "Widget produced by Machine A" and D = "Widget is defective".</p>
                                <p>P(A|D) = [P(D|A) × P(A)] / P(D)</p>
                                <p>P(D) = P(D|A)×P(A) + P(D|B)×P(B) + P(D|C)×P(C) = 0.05×0.20 + 0.03×0.30 + 0.02×0.50 = 0.01 + 0.009 + 0.01 = 0.029</p>
                                <p>P(A|D) = (0.05 × 0.20) / 0.029 = 0.01 / 0.029 ≈ 0.3448 ≈ 0.33 or 33%</p>
                            </div>
                            
                            <div class="quiz-feedback incorrect" style="display: none;">
                                <p><strong>Incorrect.</strong> Let's use Bayes' Theorem with multiple hypotheses. We need to find P(A|D) where A = "Widget produced by Machine A" and D = "Widget is defective".</p>
                                <p>P(A|D) = [P(D|A) × P(A)] / P(D)</p>
                                <p>P(D) = P(D|A)×P(A) + P(D|B)×P(B) + P(D|C)×P(C) = 0.05×0.20 + 0.03×0.30 + 0.02×0.50 = 0.01 + 0.009 + 0.01 = 0.029</p>
                                <p>P(A|D) = (0.05 × 0.20) / 0.029 = 0.01 / 0.029 ≈ 0.3448 ≈ 0.33 or 33%</p>
                            </div>
                            
                            <button class="btn btn-primary mt-3 check-answer-btn" data-question="q2">Check Answer</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Applications of Bayes' Theorem -->
            <div class="row mb-5">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Real-World Applications of Bayes' Theorem</h2>
                        
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-heartbeat me-2"></i> Medical Diagnosis</h4>
                                        <p class="card-text">Doctors use Bayesian reasoning to update the probability of a diagnosis based on test results, symptoms, and patient history.</p>
                                        <p class="card-text mt-2">Example: Calculating the probability a patient has a disease given a positive test result.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-envelope me-2"></i> Spam Filtering</h4>
                                        <p class="card-text">Email services use Bayesian classifiers to determine the probability that a message is spam based on the words it contains.</p>
                                        <p class="card-text mt-2">Example: Gmail's spam filter uses Bayesian inference to identify and filter out unwanted emails.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-robot me-2"></i> Machine Learning</h4>
                                        <p class="card-text">Bayesian methods are fundamental in many machine learning algorithms for classification, prediction, and decision-making.</p>
                                        <p class="card-text mt-2">Example: Naive Bayes classifiers for text categorization and recommendation systems.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-search me-2"></i> Search & Rescue</h4>
                                        <p class="card-text">Bayesian methods help optimize search patterns by updating location probabilities based on where searches have already been conducted.</p>
                                        <p class="card-text mt-2">Example: The Coast Guard uses Bayesian search theory to locate missing vessels.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-gavel me-2"></i> Legal Reasoning</h4>
                                        <p class="card-text">Bayes' Theorem helps evaluate the strength of evidence in legal cases by updating prior beliefs with new evidence.</p>
                                        <p class="card-text mt-2">Example: Assessing the probability of guilt given forensic evidence.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-chart-line me-2"></i> Finance</h4>
                                        <p class="card-text">Investors use Bayesian methods to update their beliefs about market trends based on new economic data.</p>
                                        <p class="card-text mt-2">Example: Algorithmic trading systems that use Bayesian inference to predict market movements.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Further Reading -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="theory-block" data-aos="fade-up">
                        <h2 class="mb-4">Further Reading</h2>
                        <p>To deepen your understanding of Bayes' Theorem and related concepts, explore these topics:</p>
                        
                        <div class="row g-4 mt-2">
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-link me-2"></i> Conditional Probability</h4>
                                        <p class="card-text">Learn about how probabilities change when additional information is known.</p>
                                        <a href="conditional.html" class="btn btn-outline-primary mt-auto">Learn More</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-link me-2"></i> Sample Space & Events</h4>
                                        <p class="card-text">Understand the foundations of probability theory.</p>
                                        <a href="sample-space.html" class="btn btn-outline-primary mt-auto">Learn More</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-dark h-100">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fas fa-link me-2"></i> Independence</h4>
                                        <p class="card-text">Explore when events don't affect each other's probabilities.</p>
                                        <a href="independence.html" class="btn btn-outline-primary mt-auto">Learn More</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer py-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5>Random Variables & Probability</h5>
                    <p>A comprehensive calculator for probability theory concepts and distributions.</p>
                </div>
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="sample-space.html">Basic Probability</a></li>
                        <li><a href="../discrete-distributions/binomial.html">Discrete Distributions</a></li>
                        <li><a href="../continuous-distributions/normal.html">Continuous Distributions</a></li>
                        <li><a href="../about.html">About</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5>Connect with me</h5>
                    <div class="social-links">
                        <a href="mailto:janithmihijaya123@gmail.com"><i class="fas fa-envelope"></i></a>
                        <a href="https://www.facebook.com/janith.deshan.186"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.linkedin.com/in/janithdeshan/"><i class="fab fa-linkedin"></i></a>
                        <a href="https://github.com/janiyax35"><i class="fab fa-github"></i></a>
                        <a href="https://www.instagram.com/janith_deshan11/"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <hr class="mt-4 mb-3">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 Janith Deshan. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Built with <i class="fas fa-heart text-danger"></i> for probability enthusiasts</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Libraries -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Bootstrap 5 JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS Animation Library JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Particles.js for background animation -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- MathJax for Mathematical Notation -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Custom JS -->
    <script src="../../js/main.js"></script>
    <script src="../../js/animations.js"></script>
    <script src="../../js/utils.js"></script>
    
    <!-- Form Handling Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Standard Bayes' Theorem Form Handler
            document.getElementById('standardBayesForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateStandardBayes();
            });
            
            // Medical Bayes' Theorem Form Handler
            document.getElementById('medicalBayesForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateMedicalBayes();
            });
            
            // Multiple Hypotheses Form Handler
            document.getElementById('multipleBayesForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateMultipleBayes();
            });
            
            // Handle number of hypotheses change
            document.getElementById('numHypotheses').addEventListener('change', function() {
                updateHypothesesInputs();
            });
            
            // Monitor prior probability inputs for sum warning
            document.querySelectorAll('.prior-input').forEach(input => {
                input.addEventListener('input', checkPriorSum);
            });
            
            // Initialize with the default number of hypotheses
            updateHypothesesInputs();
            
            // Quiz functionality
            document.querySelectorAll('.check-answer-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const questionName = this.getAttribute('data-question');
                    const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                    
                    if (!selectedOption) {
                        alert('Please select an answer first.');
                        return;
                    }
                    
                    const optionContainer = selectedOption.closest('.quiz-option');
                    const isCorrect = optionContainer.getAttribute('data-correct') === 'true';
                    
                    // Hide all feedback first
                    const questionCard = this.closest('.quiz-card');
                    questionCard.querySelector('.quiz-feedback.correct').style.display = 'none';
                    questionCard.querySelector('.quiz-feedback.incorrect').style.display = 'none';
                    
                    // Show appropriate feedback
                    if (isCorrect) {
                        questionCard.querySelector('.quiz-feedback.correct').style.display = 'block';
                    } else {
                        questionCard.querySelector('.quiz-feedback.incorrect').style.display = 'block';
                    }
                    
                    // Scroll to feedback
                    questionCard.querySelector('.quiz-feedback').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
            });
        });
        
        // Function to update hypotheses inputs based on selected number
        function updateHypothesesInputs() {
            const numHypotheses = parseInt(document.getElementById('numHypotheses').value);
            const container = document.getElementById('hypothesesContainer');
            
            // Keep the existing rows up to the selected number
            const existingRows = container.querySelectorAll('.hypothesis-row');
            
            // Remove extra rows if there are more than needed
            for (let i = numHypotheses; i < existingRows.length; i++) {
                container.removeChild(existingRows[i]);
            }
            
            // Add new rows if there are fewer than needed
            for (let i = existingRows.length; i < numHypotheses; i++) {
                const newRow = document.createElement('div');
                newRow.className = 'hypothesis-row mb-3 p-3 bg-dark rounded';
                newRow.innerHTML = `
                    <h5>Hypothesis ${i + 1}</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="prior${i + 1}" class="form-label">Prior P(H₍${i + 1}₎)</label>
                            <input type="number" class="form-control prior-input" id="prior${i + 1}" min="0" max="1" step="0.01" value="0.25" required>
                        </div>
                        <div class="col-md-6">
                            <label for="likelihood${i + 1}" class="form-label">Likelihood P(E|H₍${i + 1}₎)</label>
                            <input type="number" class="form-control" id="likelihood${i + 1}" min="0" max="1" step="0.01" value="0.50" required>
                        </div>
                    </div>
                `;
                container.appendChild(newRow);
                
                // Add event listener to the new prior input
                newRow.querySelector('.prior-input').addEventListener('input', checkPriorSum);
            }
            
            // Check the sum of priors after updating inputs
            checkPriorSum();
        }
        
        // Function to check if the sum of prior probabilities is approximately 1
        function checkPriorSum() {
            const priorInputs = document.querySelectorAll('.prior-input');
            let sum = 0;
            
            priorInputs.forEach(input => {
                const value = parseFloat(input.value) || 0;
                sum += value;
            });
            
            // Show warning if sum is not close to 1
            const warningElement = document.getElementById('priorSumWarning');
            if (Math.abs(sum - 1) > 0.01) {
                warningElement.style.display = 'flex';
            } else {
                warningElement.style.display = 'none';
            }
        }
        
        // Standard Bayes' Theorem Calculator
        function calculateStandardBayes() {
            const prior = parseFloat(document.getElementById('priorProbability').value);
            const likelihood = parseFloat(document.getElementById('likelihood').value);
            const unlikelihood = parseFloat(document.getElementById('unlikelihood').value);
            
            // Validate inputs
            if (prior < 0 || prior > 1 || likelihood < 0 || likelihood > 1 || unlikelihood < 0 || unlikelihood > 1) {
                alert('All probabilities must be between 0 and 1.');
                return;
            }
            
            // Calculate posterior probability using Bayes' Theorem
            const notPrior = 1 - prior;
            const marginal = likelihood * prior + unlikelihood * notPrior;
            
            if (marginal === 0) {
                alert('Cannot calculate posterior probability. The marginal probability P(B) is zero.');
                return;
            }
            
            const posterior = (likelihood * prior) / marginal;
            
            // Prepare input summary
            const inputSummary = `P(A) = ${prior} (Prior probability)
P(B|A) = ${likelihood} (Likelihood)
P(B|¬A) = ${unlikelihood} (Unlikelihood)`;
            
            // Prepare formula display
            const formula = `P(A|B) = \\frac{P(B|A) \\cdot P(A)}{P(B|A) \\cdot P(A) + P(B|\\neg A) \\cdot P(\\neg A)} = \\frac{${likelihood} \\cdot ${prior}}{${likelihood} \\cdot ${prior} + ${unlikelihood} \\cdot ${notPrior}} = \\frac{${(likelihood * prior).toFixed(6)}}{${marginal.toFixed(6)}} = ${posterior.toFixed(6)}`;
            
            // Prepare interpretation
            let interpretation = `The posterior probability P(A|B) is ${(posterior * 100).toFixed(2)}%.`;
            
            if (posterior > prior) {
                interpretation += ` This is higher than the prior probability of ${(prior * 100).toFixed(2)}%, indicating that the evidence B increases our belief in hypothesis A.`;
            } else if (posterior < prior) {
                interpretation += ` This is lower than the prior probability of ${(prior * 100).toFixed(2)}%, indicating that the evidence B decreases our belief in hypothesis A.`;
            } else {
                interpretation += ` This is equal to the prior probability, indicating that the evidence B does not affect our belief in hypothesis A.`;
            }
            
            // Prepare solution steps
            const steps = [
                `Step 1: Identify the values from the input.`,
                `P(A) = ${prior} (Prior probability)`,
                `P(B|A) = ${likelihood} (Likelihood)`,
                `P(B|¬A) = ${unlikelihood} (Unlikelihood)`,
                `P(¬A) = 1 - P(A) = 1 - ${prior} = ${notPrior}`,
                `Step 2: Calculate the marginal probability P(B) using the law of total probability.`,
                `P(B) = P(B|A) · P(A) + P(B|¬A) · P(¬A)`,
                `P(B) = ${likelihood} · ${prior} + ${unlikelihood} · ${notPrior} = ${(likelihood * prior).toFixed(6)} + ${(unlikelihood * notPrior).toFixed(6)} = ${marginal.toFixed(6)}`,
                `Step 3: Apply Bayes' Theorem to calculate the posterior probability.`,
                `P(A|B) = [P(B|A) · P(A)] / P(B)`,
                `P(A|B) = [${likelihood} · ${prior}] / ${marginal.toFixed(6)} = ${(likelihood * prior).toFixed(6)} / ${marginal.toFixed(6)} = ${posterior.toFixed(6)}`
            ];
            
            // Display results
            displayResults({
                inputSummary: inputSummary,
                formula: formula,
                result: posterior,
                interpretation: interpretation,
                steps: steps
            });
        }
        
        // Medical Bayes' Theorem Calculator
        function calculateMedicalBayes() {
            const prevalence = parseFloat(document.getElementById('prevalence').value);
            const sensitivity = parseFloat(document.getElementById('sensitivity').value);
            const specificity = parseFloat(document.getElementById('specificity').value);
            const calculationType = document.getElementById('medicalCalculationType').value;
            
            // Validate inputs
            if (prevalence < 0 || prevalence > 1 || sensitivity < 0 || sensitivity > 1 || specificity < 0 || specificity > 1) {
                alert('All probabilities must be between 0 and 1.');
                return;
            }
            
            // Calculate probabilities
            const pD = prevalence; // P(D) - probability of disease
            const pNotD = 1 - pD; // P(¬D) - probability of no disease
            const pTgivenD = sensitivity; // P(T|D) - probability of positive test given disease
            const pNotTgivenNotD = specificity; // P(¬T|¬D) - probability of negative test given no disease
            const pTgivenNotD = 1 - pNotTgivenNotD; // P(T|¬D) - false positive rate
            const pNotTgivenD = 1 - pTgivenD; // P(¬T|D) - false negative rate
            
            // Calculate P(T) - probability of positive test
            const pT = pTgivenD * pD + pTgivenNotD * pNotD;
            // Calculate P(¬T) - probability of negative test
            const pNotT = pNotTgivenD * pD + pNotTgivenNotD * pNotD;
            
            let result, formula, interpretation;
            
            if (calculationType === 'positivePredictive') {
                // P(D|T) - Positive Predictive Value
                result = (pTgivenD * pD) / pT;
                formula = `P(D|T) = \\frac{P(T|D) \\cdot P(D)}{P(T)} = \\frac{${pTgivenD} \\cdot ${pD}}{${pT.toFixed(6)}} = ${result.toFixed(6)}`;
                interpretation = `The positive predictive value is ${(result * 100).toFixed(2)}%. This means that if a patient tests positive, there is a ${(result * 100).toFixed(2)}% chance they actually have the disease.`;
            } else {
                // P(¬D|¬T) - Negative Predictive Value
                result = (pNotTgivenNotD * pNotD) / pNotT;
                formula = `P(\\neg D|\\neg T) = \\frac{P(\\neg T|\\neg D) \\cdot P(\\neg D)}{P(\\neg T)} = \\frac{${pNotTgivenNotD} \\cdot ${pNotD}}{${pNotT.toFixed(6)}} = ${result.toFixed(6)}`;
                interpretation = `The negative predictive value is ${(result * 100).toFixed(2)}%. This means that if a patient tests negative, there is a ${(result * 100).toFixed(2)}% chance they truly do not have the disease.`;
            }
            
            // Prepare input summary
            const inputSummary = `Prevalence = ${prevalence} (Prior probability of disease)
Sensitivity = ${sensitivity} (Probability of positive test given disease)
Specificity = ${specificity} (Probability of negative test given no disease)`;
            
            // Prepare solution steps
            const steps = [
                `Step 1: Identify the values from the input.`,
                `P(D) = ${pD} (Prevalence)`,
                `P(T|D) = ${pTgivenD} (Sensitivity)`,
                `P(¬T|¬D) = ${pNotTgivenNotD} (Specificity)`,
                `Step 2: Calculate additional probabilities.`,
                `P(¬D) = 1 - P(D) = 1 - ${pD} = ${pNotD}`,
                `P(T|¬D) = 1 - P(¬T|¬D) = 1 - ${pNotTgivenNotD} = ${pTgivenNotD}`,
                `P(¬T|D) = 1 - P(T|D) = 1 - ${pTgivenD} = ${pNotTgivenD}`,
                `Step 3: Calculate the total probability using the law of total probability.`
            ];
            
            if (calculationType === 'positivePredictive') {
                steps.push(`P(T) = P(T|D) · P(D) + P(T|¬D) · P(¬D)`);
                steps.push(`P(T) = ${pTgivenD} · ${pD} + ${pTgivenNotD} · ${pNotD} = ${(pTgivenD * pD).toFixed(6)} + ${(pTgivenNotD * pNotD).toFixed(6)} = ${pT.toFixed(6)}`);
                steps.push(`Step 4: Apply Bayes' Theorem to calculate the positive predictive value.`);
                steps.push(`P(D|T) = [P(T|D) · P(D)] / P(T)`);
                steps.push(`P(D|T) = [${pTgivenD} · ${pD}] / ${pT.toFixed(6)} = ${(pTgivenD * pD).toFixed(6)} / ${pT.toFixed(6)} = ${result.toFixed(6)}`);
            } else {
                steps.push(`P(¬T) = P(¬T|D) · P(D) + P(¬T|¬D) · P(¬D)`);
                steps.push(`P(¬T) = ${pNotTgivenD} · ${pD} + ${pNotTgivenNotD} · ${pNotD} = ${(pNotTgivenD * pD).toFixed(6)} + ${(pNotTgivenNotD * pNotD).toFixed(6)} = ${pNotT.toFixed(6)}`);
                steps.push(`Step 4: Apply Bayes' Theorem to calculate the negative predictive value.`);
                steps.push(`P(¬D|¬T) = [P(¬T|¬D) · P(¬D)] / P(¬T)`);
                steps.push(`P(¬D|¬T) = [${pNotTgivenNotD} · ${pNotD}] / ${pNotT.toFixed(6)} = ${(pNotTgivenNotD * pNotD).toFixed(6)} / ${pNotT.toFixed(6)} = ${result.toFixed(6)}`);
            }
            
            // Display results
            displayResults({
                inputSummary: inputSummary,
                formula: formula,
                result: result,
                interpretation: interpretation,
                steps: steps
            });
        }
        
        // Multiple Hypotheses Bayes' Theorem Calculator
        function calculateMultipleBayes() {
            const numHypotheses = parseInt(document.getElementById('numHypotheses').value);
            
            // Create arrays to store priors and likelihoods
            const priors = [];
            const likelihoods = [];
            
            // Read values from inputs
            for (let i = 1; i <= numHypotheses; i++) {
                const prior = parseFloat(document.getElementById(`prior${i}`).value);
                const likelihood = parseFloat(document.getElementById(`likelihood${i}`).value);
                
                // Validate inputs
                if (isNaN(prior) || prior < 0 || prior > 1 || isNaN(likelihood) || likelihood < 0 || likelihood > 1) {
                    alert(`Please enter valid probabilities for Hypothesis ${i}.`);
                    return;
                }
                
                priors.push(prior);
                likelihoods.push(likelihood);
            }
            
            // Calculate normalization for priors if they don't sum to 1
            const priorSum = priors.reduce((sum, p) => sum + p, 0);
            const normalizedPriors = priors.map(p => p / priorSum);
            
            // Calculate marginal probability P(E)
            const marginal = normalizedPriors.reduce((sum, prior, i) => sum + prior * likelihoods[i], 0);
            
            if (marginal === 0) {
                alert('Cannot calculate posterior probabilities. The marginal probability P(E) is zero.');
                return;
            }
            
            // Calculate posteriors
            const posteriors = normalizedPriors.map((prior, i) => (likelihoods[i] * prior) / marginal);
            
            // Calculate unnormalized posterior values for display
            const unnormalizedPosteriors = normalizedPriors.map((prior, i) => likelihoods[i] * prior);
            
            // Prepare input summary and table data
            let inputSummary = 'Hypothesis Priors and Likelihoods:';
            const tableRows = [];
            
            for (let i = 0; i < numHypotheses; i++) {
                inputSummary += `\nH${i+1}: Prior = ${normalizedPriors[i].toFixed(4)}, Likelihood = ${likelihoods[i].toFixed(4)}`;
                
                tableRows.push({
                    hypothesis: `H${i+1}`,
                    prior: normalizedPriors[i],
                    likelihood: likelihoods[i],
                    product: unnormalizedPosteriors[i],
                    posterior: posteriors[i]
                });
            }
            
            // Show multiple results container
            document.getElementById('multipleResultsContainer').style.display = 'block';
            
            // Populate the table
            const tableBody = document.getElementById('posteriorTableBody');
            tableBody.innerHTML = '';
            
            tableRows.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.hypothesis}</td>
                    <td>${row.prior.toFixed(4)}</td>
                    <td>${row.likelihood.toFixed(4)}</td>
                    <td>${row.product.toFixed(6)}</td>
                    <td class="fw-bold">${row.posterior.toFixed(6)}</td>
                `;
                tableBody.appendChild(tr);
            });
            
            // Find the hypothesis with highest posterior
            const maxPosterior = Math.max(...posteriors);
            const maxIndex = posteriors.indexOf(maxPosterior);
            
            // Prepare formula display
            const formula = `P(H_i|E) = \\frac{P(E|H_i) \\cdot P(H_i)}{\\sum_{j=1}^{${numHypotheses}} P(E|H_j) \\cdot P(H_j)}`;
            
            // Prepare interpretation
            const interpretation = `The hypothesis H${maxIndex+1} has the highest posterior probability of ${(maxPosterior * 100).toFixed(2)}%.`;
            
            // Prepare solution steps
            const steps = [
                `Step 1: Identify the values from the input.`
            ];
            
            // Add priors and likelihoods to steps
            for (let i = 0; i < numHypotheses; i++) {
                steps.push(`P(H${i+1}) = ${normalizedPriors[i].toFixed(4)} (Normalized prior probability)`);
                steps.push(`P(E|H${i+1}) = ${likelihoods[i].toFixed(4)} (Likelihood)`);
            }
            
            steps.push(`Step 2: Calculate the marginal probability P(E) using the law of total probability.`);
            steps.push(`P(E) = ∑ P(E|Hᵢ) · P(Hᵢ)`);
            
            let marginalCalculation = 'P(E) = ';
            for (let i = 0; i < numHypotheses; i++) {
                marginalCalculation += `${likelihoods[i]} · ${normalizedPriors[i].toFixed(4)}`;
                if (i < numHypotheses - 1) {
                    marginalCalculation += ' + ';
                }
            }
            marginalCalculation += ` = ${marginal.toFixed(6)}`;
            steps.push(marginalCalculation);
            
            steps.push(`Step 3: Apply Bayes' Theorem to calculate the posterior probabilities.`);
            steps.push(`P(Hᵢ|E) = [P(E|Hᵢ) · P(Hᵢ)] / P(E)`);
            
            // Add calculations for each hypothesis
            for (let i = 0; i < numHypotheses; i++) {
                steps.push(`P(H${i+1}|E) = [${likelihoods[i]} · ${normalizedPriors[i].toFixed(4)}] / ${marginal.toFixed(6)} = ${unnormalizedPosteriors[i].toFixed(6)} / ${marginal.toFixed(6)} = ${posteriors[i].toFixed(6)}`);
            }
            
            // Display results
            displayResults({
                inputSummary: inputSummary,
                formula: formula,
                result: maxPosterior,
                interpretation: interpretation,
                steps: steps
            });
        }
        
        // Helper function to display results
        function displayResults(data) {
            // Show results container
            const resultsContainer = document.getElementById('bayesResults');
            resultsContainer.style.display = 'block';
            
            // Update results
            document.getElementById('inputSummary').textContent = data.inputSummary;
            document.getElementById('bayesFormula').textContent = data.formula;
            document.getElementById('bayesResult').textContent = data.result.toFixed(6);
            document.getElementById('resultInterpretation').textContent = data.interpretation;
            
            // Update solution steps
            const stepsHTML = data.steps.map((step, index) => {
                // Check if the step is a header (starting with "Step")
                if (step.startsWith('Step')) {
                    return `
                    <div class="step">
                        <span class="step-number">${Math.floor(index/2) + 1}</span>
                        <div class="step-content"><strong>${step}</strong></div>
                    </div>
                    `;
                } else {
                    return `
                    <div class="step" style="padding-left: 20px;">
                        <div class="step-content">${step}</div>
                    </div>
                    `;
                }
            }).join('');
            
            document.getElementById('solutionStepsList').innerHTML = stepsHTML;
            
            // Typeset the math with MathJax
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById('bayesFormula')]).catch(function (err) {
                    console.log('Error typesetting math:', err);
                });
            }
            
            // Scroll to results
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>